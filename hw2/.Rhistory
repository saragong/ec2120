#inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ num_smp_impressions_in_between + days_in_between + stg2_pred + imputed_state_thallium_change | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
df <- consecutive_pairs_df %>%
# mutate(
#   depvar_1 = ifelse(is.na(depvar_1), 0, depvar_1),
#   depvar_2 = ifelse(is.na(depvar_2), 0, depvar_2)
# ) %>%
#inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
#mutate(num_impressions_in_between )
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
df <- consecutive_pairs_df %>%
# mutate(
#   depvar_1 = ifelse(is.na(depvar_1), 0, depvar_1),
#   depvar_2 = ifelse(is.na(depvar_2), 0, depvar_2)
# ) %>%
#inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
#mutate(num_impressions_in_between )
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ num_smp_impressions_in_between + days_in_between + stg2_pred + imputed_state_thallium_change | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + stg2_pred + imputed_state_thallium_change | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
df <- consecutive_pairs_df %>%
# mutate(
#   depvar_1 = ifelse(is.na(depvar_1), 0, depvar_1),
#   depvar_2 = ifelse(is.na(depvar_2), 0, depvar_2)
# ) %>%
#inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
#mutate(num_impressions_in_between )
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + stg2_pred + imputed_state_thallium_change | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
df <- consecutive_pairs_df %>%
# mutate(
#   depvar_1 = ifelse(is.na(depvar_1), 0, depvar_1),
#   depvar_2 = ifelse(is.na(depvar_2), 0, depvar_2)
# ) %>%
inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
#mutate(num_impressions_in_between )
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + stg2_pred + imputed_state_thallium_change | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
df <- consecutive_pairs_df %>%
# mutate(
#   depvar_1 = ifelse(is.na(depvar_1), 0, depvar_1),
#   depvar_2 = ifelse(is.na(depvar_2), 0, depvar_2)
# ) %>%
inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
#mutate(num_smp_impressions_in_between )
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + imputed_state_thallium_change | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
df <- consecutive_pairs_df %>%
# mutate(
#   depvar_1 = ifelse(is.na(depvar_1), 0, depvar_1),
#   depvar_2 = ifelse(is.na(depvar_2), 0, depvar_2)
# ) %>%
inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
#mutate(num_smp_impressions_in_between )
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + imputed_state_thallium_change | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
df <- consecutive_pairs_df %>%
# mutate(
#   depvar_1 = ifelse(is.na(depvar_1), 0, depvar_1),
#   depvar_2 = ifelse(is.na(depvar_2), 0, depvar_2)
# ) %>%
#inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
#mutate(num_smp_impressions_in_between )
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + imputed_state_thallium_change | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + imputed_state_thallium_change | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + imputed_state_thallium_change + stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
df <- consecutive_pairs_df %>%
# mutate(
#   depvar_1 = ifelse(is.na(depvar_1), 0, depvar_1),
#   depvar_2 = ifelse(is.na(depvar_2), 0, depvar_2)
# ) %>%
#inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>500, 500, num_smp_impressions_in_between)) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + imputed_state_thallium_change + stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ num_smp_impressions_in_between + imputed_state_thallium_change + stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
vote_switch_filtered_respondents_df %>%
filter(depvar_2 != 'Undecided' ) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
TRUE ~ 0
),
) %>%
mutate(state_code=factor(state_code)) %>%
mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>500, 500, num_smp_impressions_in_between)) %>%
#filter(!is.na(stg2_pred)) %>%
gam(depvar_2 ~ num_smp_impressions_in_between + stg2_pred + s(imputed_state_thallium_change),
data=.) %>%
summary()
df <- consecutive_pairs_df %>%
# mutate(
#   depvar_1 = ifelse(is.na(depvar_1), 0, depvar_1),
#   depvar_2 = ifelse(is.na(depvar_2), 0, depvar_2)
# ) %>%
#inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>500, 500, num_smp_impressions_in_between)) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ num_smp_impressions_in_between + imputed_state_thallium_change + stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
df <- consecutive_pairs_df %>%
# mutate(
#   depvar_1 = ifelse(is.na(depvar_1), 0, depvar_1),
#   depvar_2 = ifelse(is.na(depvar_2), 0, depvar_2)
# ) %>%
#inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>10, 10, num_smp_impressions_in_between)) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ num_smp_impressions_in_between + imputed_state_thallium_change + stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ num_smp_impressions_in_between + imputed_state_thallium_change + stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
vote_switch_filtered_respondents_df %>%
filter(depvar_2 != 'Undecided' ) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
TRUE ~ 0
),
) %>%
mutate(state_code=factor(state_code)) %>%
mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>10, 10, num_smp_impressions_in_between)) %>%
#filter(!is.na(stg2_pred)) %>%
gam(depvar_2 ~ num_smp_impressions_in_between + stg2_pred + s(imputed_state_thallium_change),
data=.) %>%
summary()
vote_switch_filtered_respondents_df %>%
filter(depvar_2 != 'Undecided' ) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
TRUE ~ 0
),
) %>%
mutate(state_code=factor(state_code)) %>%
mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>50, 50, num_smp_impressions_in_between)) %>%
#filter(!is.na(stg2_pred)) %>%
gam(depvar_2 ~ num_smp_impressions_in_between + stg2_pred + s(imputed_state_thallium_change),
data=.) %>%
summary()
vote_switch_filtered_respondents_df %>%
filter(depvar_2 != 'Undecided' ) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
TRUE ~ 0
),
) %>%
mutate(state_code=factor(state_code)) %>%
mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>50, 50, num_smp_impressions_in_between)) %>%
#filter(!is.na(stg2_pred)) %>%
gam(depvar_2 ~ num_smp_impressions_in_between + stg2_pred + s(imputed_state_thallium_change),
data=.) %>%
summary()
vote_switch_filtered_respondents_df %>%
filter(depvar_2 != 'Undecided' ) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
TRUE ~ 0
),
) %>%
mutate(state_code=factor(state_code)) %>%
mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>5, 5, num_smp_impressions_in_between)) %>%
#filter(!is.na(stg2_pred)) %>%
gam(depvar_2 ~ num_smp_impressions_in_between + stg2_pred + s(imputed_state_thallium_change),
data=.) %>%
summary()
df <- consecutive_pairs_df %>%
# mutate(
#   depvar_1 = ifelse(is.na(depvar_1), 0, depvar_1),
#   depvar_2 = ifelse(is.na(depvar_2), 0, depvar_2)
# ) %>%
#inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>5, 5, num_smp_impressions_in_between)) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ num_smp_impressions_in_between + imputed_state_thallium_change + stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
vote_switch_filtered_respondents_df %>%
filter(depvar_2 != 'Undecided' ) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
TRUE ~ 0
),
) %>%
mutate(state_code=factor(state_code)) %>%
#mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>5, 5, num_smp_impressions_in_between)) %>%
#filter(!is.na(stg2_pred)) %>%
gam(depvar_2 ~ saw_smp_ad_in_between + stg2_pred + s(imputed_state_thallium_change),
data=.) %>%
summary()
vote_switch_filtered_respondents_df %>%
filter(depvar_2 != 'Undecided' ) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
TRUE ~ 0
),
) %>%
mutate(state_code=factor(state_code)) %>%
#mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>5, 5, num_smp_impressions_in_between)) %>%
#filter(!is.na(stg2_pred)) %>%
gam(depvar_2 ~ saw_smp_ad_in_between*media_channel + stg2_pred + s(imputed_state_thallium_change),
data=.) %>%
summary()
vote_switch_filtered_respondents_df %>%
filter(depvar_2 != 'Undecided' ) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
TRUE ~ 0
),
) %>%
mutate(state_code=factor(state_code)) %>%
#mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>5, 5, num_smp_impressions_in_between)) %>%
#filter(!is.na(stg2_pred)) %>%
gam(depvar_2 ~ saw_smp_ad_in_between*factor(media_channel) + stg2_pred + s(imputed_state_thallium_change),
data=.) %>%
summary()
vote_switch_filtered_respondents_df
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + imputed_state_thallium_change + stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
felm(saw_smp_ad_in_between ~ stg2_pred + imputed_state_thallium_change | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
felm(saw_smp_ad_in_between ~ stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
df <- consecutive_pairs_df %>%
# mutate(
#   depvar_1 = ifelse(is.na(depvar_1), 0, depvar_1),
#   depvar_2 = ifelse(is.na(depvar_2), 0, depvar_2)
# ) %>%
#inner_join(select(vote_switch_filtered_respondents_df, unique_id, n_vote_switches)) %>%
filter(depvar_2 != 'Undecided') %>%
mutate(num_smp_impressions_in_between = ifelse(num_smp_impressions_in_between>5, 5, num_smp_impressions_in_between)) %>%
mutate(
# depvar_1 = case_when(
#   depvar_1 == '1' ~ 1,
#   TRUE ~ 0
# ),
depvar_2 = case_when(
depvar_2 == '1' ~ 1,
depvar_2 == '0' ~ 0,
)
)
felm(saw_smp_ad_in_between ~ stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
felm(depvar_2 ~ stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
lm(depvar_2 ~ stg2_pred, data=df) %>% summary()
felm(depvar_2 ~ stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + imputed_state_thallium_change | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + imputed_state_thallium_change + stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
0.001428/0.0003427
#felm(depvar_2 ~ num_impressions_in_between | unique_id, data = df, weights=df$weight) %>% summary(robust=T)
felm(depvar_2 ~ saw_smp_ad_in_between + imputed_state_thallium_change + stg2_pred | unique_id,
data = df,
weights=df$weight) %>%
summary(robust=T)
